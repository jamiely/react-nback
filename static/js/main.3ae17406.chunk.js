(this.webpackJsonpnback=this.webpackJsonpnback||[]).push([[0],[,,,,,,,,,,,,,function(t,n,e){},function(t,n,e){},function(t,n,e){},,function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){"use strict";e.r(n);var c,o,r=e(1),a=e.n(r),i=e(8),s=e.n(i),u=(e(13),e(7)),l=(e(14),e(3)),d=(e(15),e(2)),h=["\ud83d\udca9","\ud83c\udf49","\ud83d\udd25","\ud83d\ude05","\ud83d\udc12","\ud83c\udf08","\ud83c\udf4f","\u26bd"],j=["A","B","C","D","E","F","G","H","J"];!function(t){t.None="",t.Match="Match",t.NoMatch="NoMatch"}(c||(c={})),function(t){t.Symbol="symbol",t.Location="location",t.Audio="audio"}(o||(o={}));var b={round:0,state:c.None};function m(){var t=Math.floor(3*Math.random()),n=Math.floor(3*Math.random());return{text:O(),location:{row:t,column:n},audio:f()}}function f(){var t=Math.floor(Math.random()*j.length);return j[t]}function v(t){return 3*t.row+t.column}function y(t,n){if(t.current.matchState!==c.None)return t;var e={round:t.round,state:c.None},r=t.score,a=Object(d.a)({},t.current);return!function(t,n){return n===o.Location?function(t){var n=t.roundsBack,e=t.history,c=t.current;if(n-1>=e.length)return!1;var o=e[n-1].symbol,r=c.symbol.location;return o.location.row===r.row&&o.location.column===r.column}(t):n===o.Symbol?function(t){var n=t.roundsBack,e=t.history,c=t.current;return!(n-1>=e.length)&&e[n-1].symbol.text===c.symbol.text}(t):n===o.Audio?function(t){var n=t.roundsBack,e=t.history,c=t.current;return!(n-1>=e.length)&&e[n-1].symbol.audio===c.symbol.audio}(t):(console.error("Unrecognized match type ".concat(n)),!1)}(t,n)?a.matchState=e.state=c.NoMatch:(a.matchState=e.state=c.Match,r+=1),Object(d.a)(Object(d.a)({},t),{},{current:a,score:r,matchHistory:t.matchHistory.concat([e])})}function O(){var t=Math.floor(Math.random()*h.length);return h[t]}function x(t){var n=t.current.symbol.location,e=m();return n.row===e.location.row&&n.column===e.location.column?x(t):e}var k=e(0),g=function(t){var n=t.symbol;return Object(k.jsx)("div",{className:"cell",children:null===n||void 0===n?void 0:n.text})},N=function(t){var n=v(t.symbol.location),e=Object(l.a)(Array(9)).map((function(e,c){var o=n===c?t.symbol:void 0;return Object(k.jsx)(g,{symbol:o},c)}));return Object(k.jsx)("div",{className:"gridContainer",children:Object(k.jsx)("div",{className:"grid",children:e})})};var p=function(t){var n=t.text,e=t.onClick;return Object(k.jsx)("div",{children:Object(k.jsx)("button",{onClick:e,children:n})})};e(17);var S=function(t){return Object(k.jsxs)("div",{className:"infoBar",children:["2-Back",Object(k.jsx)(p,{onClick:t.onLocationClick,text:"(L)ocation"}),Object(k.jsx)(p,{onClick:t.onSymbolClick,text:"Symbol (K)"}),Object(k.jsx)(p,{onClick:t.onAudioClick,text:"Audio (J)"}),t.children]})};e(18);function w(t){var n=t.historyItem,e=t.historyIndex,c=v(n.symbol.location);var o=e+1;return Object(k.jsxs)("div",{className:"historyItem historyItem-".concat(e," matchStatus-").concat(n.matchState),children:[o,"-back",Object(k.jsx)("div",{className:"grid",children:Object(l.a)(Array(9)).map((function(t,e){var o="",r="\xa0";return c===e&&(o=" selected",r=n.symbol.text),Object(k.jsx)("div",{className:"cell ".concat(o),children:r},e)}))}),Object(k.jsx)("div",{className:"audio",children:n.symbol.audio})]})}var C=function(t){var n=t.game,e=n.history.slice(0,10);return Object(k.jsxs)("div",{className:"history",children:[Object(k.jsx)("h3",{children:"History"}),Object(k.jsx)(w,{historyItem:n.current,historyIndex:-1}),e.map((function(t,n){return w({historyItem:t,historyIndex:n})}))]})};function M(t,n,e){Object(r.useEffect)((function(){function e(e){-1!==t.indexOf(e.key)&&n()}return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),e)}e(19);var I=function(t){var n=t.score;return Object(k.jsx)("div",{className:"score",children:n})},L=window.speechSynthesis,B=null===L||void 0===L?void 0:L.getVoices();function A(t){var n=function(t){var n=t.matchHistory;return 0===n.length?b:n[n.length-1]}(t);if(n.round<t.round-1)return Object(k.jsx)(k.Fragment,{});var e={};return e[c.Match]="That was a ".concat(t.roundsBack,"-back!"),e[c.NoMatch]="That wasn't a match.",Object(k.jsx)("div",{children:e[n.state]})}var E=function(t){var n=t.game,e=Object(r.useState)(n),a=Object(u.a)(e,2),i=a[0],s=a[1],h=Object(r.useState)(2e3),j=Object(u.a)(h,2),b=j[0],m=j[1];function f(){s(y(i,o.Location))}function v(){s(y(i,o.Location))}function O(){s(y(i,o.Audio))}return M(["k","K"],v,[i]),M(["L","l"],f,[i]),M(["J","j"],O,[i]),M(["p","P"],(function(){m((function(t){return t?null:2e3}))}),[]),function(t,n){var e=Object(r.useRef)();Object(r.useEffect)((function(){e.current=t}),[t]),Object(r.useEffect)((function(){if(null!==n){var t=setInterval((function(){e&&e.current&&e.current()}),n);return function(){return clearInterval(t)}}}),[n])}((function(){var t=function(t){return Object(d.a)(Object(d.a)({},t),{},{round:t.round+1,current:{symbol:x(t),matchState:c.None},history:[t.current].concat(Object(l.a)(t.history))})}(i);s(t),function(t,n,e){console.log("Voice index ".concat(n," volume ").concat(e));var c=new SpeechSynthesisUtterance(t);c.voice=B[null!==n&&void 0!==n?n:0],c.volume=e,L.speak(c)}(t.current.symbol.audio,0,1)}),b),Object(k.jsxs)("div",{className:"App",children:[Object(k.jsxs)("h1",{children:["Triple ",i.roundsBack,"-back"]}),Object(k.jsx)(I,{score:i.score}),Object(k.jsxs)("div",{className:"round",children:["Round: ",i.round]}),Object(k.jsx)("div",{className:"main",children:Object(k.jsx)(N,{symbol:i.current.symbol})}),Object(k.jsx)(S,{onLocationClick:f,onSymbolClick:v,onAudioClick:O,children:A(i)}),Object(k.jsx)(C,{game:i}),Object(k.jsxs)("label",{children:["Delay",Object(k.jsxs)("select",{onChange:function(t){var n=parseInt(t.target.value);isNaN(n)&&(n=2e3),m(n)},children:[[{delay:3e3,label:"Slow"},{delay:2e3,label:"Medium"},{delay:1500,label:"Fast"}].map((function(t){return Object(k.jsx)("option",{value:t.delay,selected:t.delay===b,children:t.label},t.delay)})),Object(k.jsx)("option",{selected:!b,children:"Paused"})]})]}),Object(k.jsx)("h2",{children:"Controls"}),Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:"p - Pause"}),Object(k.jsx)("li",{children:"l - Location match"})]}),Object(k.jsx)("div",{style:{height:"100px"}})]})},F=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,21)).then((function(n){var e=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,a=n.getTTFB;e(t),c(t),o(t),r(t),a(t)}))},H={round:1,current:{matchState:c.None,symbol:Object(d.a)(Object(d.a)({},m()),{},{location:{row:0,column:0}})},history:[],roundsBack:2,matchHistory:[],score:0};s.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(E,{game:H})}),document.getElementById("root")),F()}],[[20,1,2]]]);
//# sourceMappingURL=main.3ae17406.chunk.js.map