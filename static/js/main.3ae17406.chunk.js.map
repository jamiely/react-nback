{"version":3,"sources":["Game.tsx","components/Grid.tsx","components/Choose.tsx","components/InfoBar.tsx","components/History.tsx","util.tsx","components/Score.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["MatchState","MatchType","availableCellTexts","audioChoices","initialMatchStatus","round","state","None","getRandomSymbol","row","Math","floor","random","column","text","getRandomCellText","location","audio","getRandomAudio","index","length","getIndexFromPosition","position","checkNBack","game","matchType","current","matchState","matchStatus","score","Location","roundsBack","history","symbolNRoundsBack","symbol","currentLocation","isLocationMatch","Symbol","isTextMatch","Audio","isAudioMatch","console","error","isMatch","NoMatch","Match","matchHistory","concat","symbolIndex","getNextSymbol","Cell","className","Grid","props","cells","Array","map","_","i","undefined","Choose","onClick","InfoBar","onLocationClick","onSymbolClick","onAudioClick","children","HistoryItemComponent","historyItem","historyIndex","n","otherClassName","History","slice","useKeyPress","keys","action","dependencies","useEffect","onKeyup","e","indexOf","key","window","addEventListener","removeEventListener","Score","synth","speechSynthesis","voices","getVoices","getMatchLabel","lastMatchStatus","getLastMatchStatus","messages","App","originalGame","useState","setGame","delayOption","setDelayOption","onLocationCheckClick","onSymbolCheckClick","onAudioCheckClick","delay","callback","savedCallback","useRef","id","setInterval","clearInterval","useInterval","newGame","newRound","word","voiceIndex","volume","log","utterThis","SpeechSynthesisUtterance","voice","speak","say","onChange","evt","parseInt","target","value","isNaN","label","option","selected","style","height","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3ae17406.chunk.js","sourcesContent":["\nconst availableCellTexts = ['ðŸ’©', 'ðŸ‰', 'ðŸ”¥', 'ðŸ˜…', 'ðŸ’', 'ðŸŒˆ', 'ðŸ', 'âš½'];\nconst audioChoices = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'J'];\n\nexport enum MatchState {\n    None = \"\",\n    Match = \"Match\",\n    NoMatch = \"NoMatch\",\n};\n\ninterface MatchStatus {\n    round: number;\n    state: MatchState;\n};\n\nexport enum MatchType {\n    Symbol = \"symbol\",\n    Location = \"location\",\n    Audio = 'audio',\n};\n\nexport const initialMatchStatus: MatchStatus = {round: 0, state: MatchState.None};\n\nexport interface HistoryItem {\n    symbol: Symbol;\n    matchState: MatchState;\n};\n\nexport interface Game {\n    round: number;\n    // past symbols\n    history: HistoryItem[];\n    // current symbols\n    current: HistoryItem;\n    // n-back\n    roundsBack: number;\n    matchHistory: MatchStatus[];\n    score: number;\n}\n\nexport function getSymbols(game: Game): Symbol[] {\n    return game.history.map(h => h.symbol);\n}\n\nexport function getLastMatchStatus({matchHistory}: Game): MatchStatus {\n    if(matchHistory.length === 0) return initialMatchStatus;\n\n    return matchHistory[matchHistory.length - 1];\n}\n\nexport interface Position {\n    row: number;\n    column: number;\n}\n\nexport interface Symbol {\n    text: string;\n    location: Position;\n    audio: string;\n}\n\nexport function getRandomSymbol(): Symbol {\n    const row = Math.floor(Math.random() * 3);\n    const column = Math.floor(Math.random() * 3);\n\n    return {\n        text: getRandomCellText(), \n        location: {row, column},\n        audio: getRandomAudio(),\n    };\n}\n\nfunction getRandomAudio(): string {\n    const index = Math.floor(Math.random() * audioChoices.length);\n    return audioChoices[index];\n}\n\nexport function getIndexFromPosition(position: Position) {\n    return position.row * 3 + position.column;\n}\n\n// returns true if n-back is true at this point\nexport function isMatch(game: Game, matchType: MatchType) {\n    if(matchType === MatchType.Location) return isLocationMatch(game);\n    if(matchType === MatchType.Symbol) return isTextMatch(game);\n    if(matchType === MatchType.Audio) return isAudioMatch(game);\n\n    console.error(`Unrecognized match type ${matchType}`);\n    return false;\n}\n\nfunction isTextMatch({roundsBack, history, current}: Game) {\n    if(roundsBack-1 >= history.length) return false;\n    const symbolNRoundsBack = history[roundsBack - 1].symbol;\n    return symbolNRoundsBack.text === current.symbol.text;\n}\n\nfunction isAudioMatch({roundsBack, history, current}: Game) {\n    if(roundsBack-1 >= history.length) return false;\n    const symbolNRoundsBack = history[roundsBack - 1].symbol;\n    return symbolNRoundsBack.audio === current.symbol.audio;\n}\n\nfunction isLocationMatch({roundsBack, history, current}: Game) {\n    if(roundsBack-1 >= history.length) return false;\n    const symbolNRoundsBack = history[roundsBack - 1].symbol;\n    const currentLocation = current.symbol.location;\n    return symbolNRoundsBack.location.row === currentLocation.row &&\n        symbolNRoundsBack.location.column === currentLocation.column;\n}\n\nexport function createGame(): Game {\n    return {\n        round: 1,\n        current: {\n            matchState: MatchState.None,\n            symbol: {\n                ...getRandomSymbol(),\n                location: {row: 0, column: 0},\n            },\n        },\n        history: [],\n        roundsBack: 2, // defaults to 2 back\n        matchHistory: [],\n        score: 0,\n    };\n}\n\nexport function checkNBack(game: Game, matchType: MatchType): Game {\n    // we already tried a match\n    if(game.current.matchState !== MatchState.None) return game;\n\n    let matchStatus = {round: game.round, state: MatchState.None};\n    let score = game.score;\n    let current = {...game.current};\n    if(! isMatch(game, matchType)) {\n        current.matchState = matchStatus.state = MatchState.NoMatch;\n    }\n    else {\n        current.matchState = matchStatus.state = MatchState.Match;\n        score += 1;\n    }\n    return {\n        ...game,\n        current,\n        score,\n        matchHistory: game.matchHistory.concat([matchStatus])\n    };\n}\n\nfunction getRandomCellText() {\n    const symbolIndex = Math.floor(Math.random() * availableCellTexts.length);\n    return availableCellTexts[symbolIndex];\n}\n\nfunction getNextSymbol(game: Game): Symbol {\n    const location = game.current.symbol.location;\n    const symbol = getRandomSymbol();\n    if(location.row === symbol.location.row \n        && location.column === symbol.location.column) {\n        return getNextSymbol(game);\n    }\n\n    return symbol;\n}\n\nexport function newRound(game: Game): Game {\n    return {\n        ...game,\n        round: game.round + 1,\n        current: {symbol: getNextSymbol(game), matchState: MatchState.None},\n        history: [\n            game.current,\n            ...game.history\n        ]\n    }\n}\n","import './Grid.css';\nimport {Symbol, getIndexFromPosition} from '../Game';\n\ninterface CellProps {\n    symbol: Symbol | undefined;\n}\n\nconst Cell = ({symbol}: CellProps) => {\n    return <div className=\"cell\">{symbol?.text}</div>\n}\n\nexport interface GridProps {\n    symbol: Symbol\n};\n\nconst Grid = (props: GridProps) => {\n    const index = getIndexFromPosition(props.symbol.location);\n    const cells = [...Array(9)].map((_, i) => {\n        const symbol = index === i ? props.symbol : undefined;\n        return <Cell key={i} symbol={symbol} />\n    });\n    return <div className=\"gridContainer\">\n        <div className=\"grid\">{cells}</div>\n    </div>;\n}\n\nexport default Grid;\n","interface ChooseProps {\n    text: string;\n    onClick: () => void;\n}\n\nfunction Choose({text, onClick}: ChooseProps) {\n    return <div><button onClick={onClick}>{text}</button></div>;\n}\n\nexport default Choose;\n\n","import React from \"react\";\nimport Choose from \"./Choose\";\nimport './InfoBar.css';\n\ninterface InfoBarProps {\n    onLocationClick: () => void;\n    onSymbolClick: () => void;\n    onAudioClick: () => void;\n    children?: any;\n}\n\nfunction InfoBar(props: InfoBarProps) {\n    return <div className=\"infoBar\">\n        2-Back \n        <Choose onClick={props.onLocationClick} text=\"(L)ocation\" />\n        <Choose onClick={props.onSymbolClick} text=\"Symbol (K)\" />\n        <Choose onClick={props.onAudioClick} text=\"Audio (J)\" />\n        {props.children}\n    </div>;\n}\nexport default InfoBar;","import { Game, getIndexFromPosition, HistoryItem } from \"../Game\";\nimport './History.css';\n\ninterface HistoryProps {\n    game: Game;\n};\n\ninterface HistoryItemProps {\n    historyItem: HistoryItem;\n    historyIndex: number;\n};\n\nfunction HistoryItemComponent({historyItem, historyIndex}: HistoryItemProps) {\n    const index = getIndexFromPosition(historyItem.symbol.location);\n\n    function getCell(_: any, i: number) {\n        let otherClassName = '';\n        let text = '\\u00A0';\n        if(index === i) {\n            otherClassName = ' selected';\n            text = historyItem.symbol.text;\n        }\n\n        return <div className={`cell ${otherClassName}`} key={i}>\n            {text}\n        </div>;\n    }\n\n    const n = historyIndex + 1;\n\n    return <div className={`historyItem historyItem-${historyIndex} matchStatus-${historyItem.matchState}`}>\n        {n}-back\n        <div className=\"grid\">\n        {[...Array(9)].map(getCell)}\n        </div>\n        <div className=\"audio\">{historyItem.symbol.audio}</div>\n    </div>;\n}\n\nfunction History({game}: HistoryProps) {\n    const history = game.history.slice(0, 10);\n    return <div className=\"history\">\n        <h3>History</h3>\n        <HistoryItemComponent historyItem={game.current} historyIndex={-1} />\n        {history.map((historyItem, historyIndex) => HistoryItemComponent({historyItem, historyIndex}))}\n    </div>\n};\n\nexport default History;\n","import { useEffect, useRef } from 'react';\n\n// https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nexport function useInterval(callback: Function, delay: number | null) {\n  const savedCallback = useRef<Function>();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      if(!savedCallback) return;\n      if(!savedCallback.current) return;\n\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\n// Adapted from\n// https://www.caktusgroup.com/blog/2020/07/01/usekeypress-hook-react/\n/**\n * useKeyPress\n * @param {string} key - the name of the key to respond to, compared against event.key\n * @param {function} action - the action to perform on key press\n */\n export function useKeyPress(keys: string[], action: Function, dependencies: any[]) {\n  useEffect(() => {\n    function onKeyup(e: KeyboardEvent) {\n      if(keys.indexOf(e.key) === -1) return;\n      action();\n    }\n    window.addEventListener('keyup', onKeyup);\n    return () => window.removeEventListener('keyup', onKeyup);\n    // eslint-disable-next-line react-hooks/exhaustive-deps \n  }, dependencies);\n}\n","import './Score.css';\n\ninterface ScoreProps {\n    score: number;\n}\n\nfunction Score({score}: ScoreProps) {\n    return <div className=\"score\">{score}</div>\n}\n\nexport default Score;","import { ChangeEvent, useState } from 'react';\nimport './App.css';\nimport Grid from './components/Grid';\nimport InfoBar from './components/InfoBar';\nimport History from './components/History';\nimport { newRound, Game, checkNBack, getLastMatchStatus, MatchState, MatchType } from './Game';\nimport { useInterval, useKeyPress } from './util';\nimport Score from './components/Score';\n\nconst synth = window.speechSynthesis;\nconst voices = synth?.getVoices();\n\nfunction say(word: string, voiceIndex: number, volume: number) {\n  console.log(`Voice index ${voiceIndex} volume ${volume}`);\n  const utterThis = new SpeechSynthesisUtterance(word);\n  utterThis.voice = voices[voiceIndex ?? 0];\n  utterThis.volume = volume;\n  synth.speak(utterThis);\n}\n\nexport interface AppProps {\n  game: Game\n};\n\nfunction getMatchLabel(game: Game) {\n  const lastMatchStatus = getLastMatchStatus(game);\n  // only show the match label if it was recent\n\n  if(lastMatchStatus.round < game.round - 1) {\n    return <></>;\n  }\n\n  const messages: {[key: string]: string} = {};\n  messages[MatchState.Match] = `That was a ${game.roundsBack}-back!`;\n  messages[MatchState.NoMatch] = \"That wasn't a match.\";\n\n  return <div>{messages[lastMatchStatus.state]}</div>;\n}\n\nfunction App({game: originalGame}: AppProps) {\n  const [game, setGame] = useState(originalGame);\n  const [delayOption, setDelayOption] = useState<number|null>(2000);\n\n  const delayOptions = [\n    {delay: 3000, label: 'Slow'},\n    {delay: 2000, label: 'Medium'},\n    {delay: 1500, label: 'Fast'}\n  ];\n\n  function onLocationCheckClick() {\n    setGame(checkNBack(game, MatchType.Location));\n  }\n  function onSymbolCheckClick() {\n    setGame(checkNBack(game, MatchType.Location));\n  }\n  \n  function onAudioCheckClick() {\n    setGame(checkNBack(game, MatchType.Audio));\n  }\n\n  useKeyPress(['k', 'K'], onSymbolCheckClick, [game]);\n  useKeyPress(['L', 'l'], onLocationCheckClick, [game]);\n  useKeyPress(['J', 'j'], onAudioCheckClick, [game]);\n\n  useKeyPress(['p', 'P'], () => {\n    setDelayOption(delay => delay ? null : 2000);\n  }, []);\n\n  useInterval(() => {\n    const newGame = newRound(game);\n    setGame(newGame);\n    say(newGame.current.symbol.audio, 0, 1);\n  }, delayOption);\n\n  function onDelayChange(evt: ChangeEvent<HTMLSelectElement>) {\n    let delay = parseInt(evt.target.value);\n    if(isNaN(delay)) delay = 2000;\n    setDelayOption(delay);\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>Triple {game.roundsBack}-back</h1>\n      <Score score={game.score} />\n      <div className=\"round\">Round: {game.round}</div>\n      <div className=\"main\">\n        <Grid symbol={game.current.symbol} />\n      </div>\n      <InfoBar \n        onLocationClick={onLocationCheckClick}\n        onSymbolClick={onSymbolCheckClick}\n        onAudioClick={onAudioCheckClick}>\n        {getMatchLabel(game)}\n      </InfoBar>\n      <History game={game} />\n      <label>Delay \n        <select onChange={onDelayChange}>\n          {delayOptions.map(option => \n             <option value={option.delay} \n              key={option.delay}\n              selected={option.delay === delayOption}\n              >\n                {option.label}\n              </option>)}\n          <option selected={!delayOption}>Paused</option>\n        </select>\n      </label>\n      <h2>Controls</h2>\n      <ul>\n        <li>p - Pause</li>\n        <li>l - Location match</li>\n      </ul>\n      <div style={{height: '100px'}}></div>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { createGame } from './Game';\n\nconst game = createGame();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App game={game} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}